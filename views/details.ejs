<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Details - Match Hub</title>
    <link rel="stylesheet" href="/css/modern-style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
    <link rel="icon" href="/images/logo.png" />
</head>
<body>
    <nav class="navbar-modern">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <img src="/images/logo.png" height="40" width="40" style="vertical-align:middle;margin-right:10px;" onerror="this.style.display='none'">
                <span style="font-family:var(--font-display);font-size:1.5rem;letter-spacing:0.05em;">MATCH HUB</span>
            </a>
            <ul class="nav-menu">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="/checkevents" class="nav-link">Events</a></li>
                <li><a href="/contactUs" class="nav-link">Contact Us</a></li>
                <% if(!currentUser) { %>
                    <li><a href="/loginUser" class="btn btn-primary" style="padding:0.5rem 1.5rem;">Login</a></li>
                <% } else { %>
                    <li><a href="/logout" class="btn btn-accent" style="padding:0.5rem 1.5rem;">Logout</a></li>
                <% } %>
            </ul>
        </div>
    </nav>

    <div style="padding:120px 20px 60px;background:#1E1E1E;min-height:100vh;">
        <div style="max-width:1000px;margin:0 auto;">
            <!-- Event Header -->
            <div style="text-align:center;margin-bottom:3rem;">
                <h1 style="font-family:var(--font-display);font-size:3rem;margin-bottom:1rem;color:#00E5FF;letter-spacing:0.05em;"><%= event.name %></h1>
                <p style="color:#A6FF00;font-size:1.2rem;font-weight:600;">Complete Event Information</p>
            </div>

            <!-- Event Image -->
            <% if(event.photo) { %>
            <div style="margin-bottom:3rem;border-radius:1rem;overflow:hidden;box-shadow:0 8px 30px rgba(0,123,255,0.3);border:2px solid rgba(0,123,255,0.3);">
                <img src="<%= event.photo %>" alt="<%= event.name %>" style="width:100%;height:400px;object-fit:cover;" />
            </div>
            <% } %>

            <!-- Event Details Grid -->
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem;margin-bottom:3rem;">
                <!-- Date Card -->
                <div class="feature-card" style="background:#2a2a2a;padding:2rem;border-radius:1rem;box-shadow:0 4px 20px rgba(0,123,255,0.2);border:1px solid rgba(0,123,255,0.3);">
                    <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem;">
                        <div style="width:50px;height:50px;background:linear-gradient(135deg,#007BFF 0%,#00E5FF 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                            <i class="fas fa-calendar-alt" style="font-size:1.5rem;color:white;"></i>
                        </div>
                        <h3 style="color:#00E5FF;margin:0;">Date</h3>
                    </div>
                    <p style="color:#FFFFFF;font-size:1.2rem;font-weight:600;"><%= event.datestart ? new Date(event.datestart).toLocaleDateString() : 'TBA' %></p>
                </div>

                <!-- Time Card -->
                <div class="feature-card" style="background:#2a2a2a;padding:2rem;border-radius:1rem;box-shadow:0 4px 20px rgba(0,123,255,0.2);border:1px solid rgba(0,123,255,0.3);">
                    <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem;">
                        <div style="width:50px;height:50px;background:linear-gradient(135deg,#A6FF00 0%,#00E5FF 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                            <i class="fas fa-clock" style="font-size:1.5rem;color:#1E1E1E;"></i>
                        </div>
                        <h3 style="color:#A6FF00;margin:0;">Time</h3>
                    </div>
                    <p style="color:#FFFFFF;font-size:1.2rem;font-weight:600;"><%= event.time %></p>
                </div>

                <!-- Mode Card -->
                <div class="feature-card" style="background:#2a2a2a;padding:2rem;border-radius:1rem;box-shadow:0 4px 20px rgba(0,123,255,0.2);border:1px solid rgba(0,123,255,0.3);">
                    <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem;">
                        <div style="width:50px;height:50px;background:linear-gradient(135deg,#007BFF 0%,#A6FF00 100%);border-radius:50%;display:flex;align-items:center;justify-content:center;">
                            <i class="fas fa-wifi" style="font-size:1.5rem;color:white;"></i>
                        </div>
                        <h3 style="color:#007BFF;margin:0;">Mode</h3>
                    </div>
                    <p style="color:#FFFFFF;font-size:1.2rem;font-weight:600;text-transform:capitalize;"><%= event.mode %></p>
                </div>
            </div>

            <!-- Additional Details -->
            <div style="background:#2a2a2a;padding:2.5rem;border-radius:1rem;box-shadow:0 8px 30px rgba(0,123,255,0.3);border:1px solid rgba(0,123,255,0.3);margin-bottom:3rem;">
                <h2 style="color:#00E5FF;margin-bottom:2rem;font-size:2rem;">Event Details</h2>
                
                <div style="display:grid;gap:1.5rem;">
                    <!-- Venue -->
                    <div style="display:flex;align-items:start;gap:1rem;padding:1rem;background:#1E1E1E;border-radius:0.5rem;">
                        <i class="fas fa-map-marker-alt" style="color:#A6FF00;font-size:1.5rem;margin-top:0.2rem;"></i>
                        <div>
                            <h4 style="color:#A6FF00;margin-bottom:0.5rem;">Venue</h4>
                            <p style="color:#FFFFFF;font-size:1.1rem;"><%= event.venue %></p>
                        </div>
                    </div>

                    <!-- Registration Fee -->
                    <div style="display:flex;align-items:start;gap:1rem;padding:1rem;background:#1E1E1E;border-radius:0.5rem;">
                        <i class="fas fa-ticket-alt" style="color:#00E5FF;font-size:1.5rem;margin-top:0.2rem;"></i>
                        <div>
                            <h4 style="color:#00E5FF;margin-bottom:0.5rem;">Registration Fee</h4>
                            <p style="color:#A6FF00;font-size:1.5rem;font-weight:700;">₹<%= event.registerationfee %></p>
                        </div>
                    </div>

                    <!-- Cash Prize -->
                    <div style="display:flex;align-items:start;gap:1rem;padding:1rem;background:#1E1E1E;border-radius:0.5rem;">
                        <i class="fas fa-trophy" style="color:#A6FF00;font-size:1.5rem;margin-top:0.2rem;"></i>
                        <div>
                            <h4 style="color:#A6FF00;margin-bottom:0.5rem;">Cash Prize</h4>
                            <p style="color:#FFFFFF;font-size:1.5rem;font-weight:700;">₹<%= event.cashprice %></p>
                        </div>
                    </div>

                    <!-- Contact -->
                    <div style="display:flex;align-items:start;gap:1rem;padding:1rem;background:#1E1E1E;border-radius:0.5rem;">
                        <i class="fas fa-phone" style="color:#007BFF;font-size:1.5rem;margin-top:0.2rem;"></i>
                        <div>
                            <h4 style="color:#007BFF;margin-bottom:0.5rem;">Contact</h4>
                            <p style="color:#FFFFFF;font-size:1.1rem;"><%= event.contact %></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Registration Form -->
            <div class="form-modern" style="max-width:600px;margin:0 auto;">
                <h2 style="margin-bottom:1.5rem;color:#FFFFFF;font-size:2rem;text-align:center;">Register for Event</h2>
                
                <form method="POST" action="/testing">
                    <input type="hidden" name="events" value="<%= event.name %>" />
                    <input type="hidden" name="amount" value="<%= event.registerationfee %>" />
                    
                    <div class="form-group">
                        <label class="form-label">Your Name</label>
                        <input type="text" name="name" class="form-input" placeholder="Enter your full name" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Address</label>
                        <input type="email" name="email" class="form-input" placeholder="Enter your email" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Mobile Number</label>
                        <input type="number" name="mobile" class="form-input" placeholder="Enter your phone number" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Transaction ID</label>
                        <input type="text" name="transactionid" class="form-input" placeholder="Enter transaction ID after payment" required />
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Year of Study</label>
                        <select name="yos" class="form-input" required>
                            <option value="">Select Year</option>
                            <option value="I">I Year</option>
                            <option value="II">II Year</option>
                            <option value="III">III Year</option>
                            <option value="IV">IV Year</option>
                        </select>
                    </div>

                    <!-- QR Code for Payment -->
                    <div style="text-align:center;margin:2rem 0;">
                        <p style="color:#A6FF00;font-size:1.1rem;font-weight:600;margin-bottom:1rem;">Scan to Pay Registration Fee</p>
                        <div style="background:white;padding:1rem;border-radius:1rem;display:inline-block;">
                            <img src="/images/qr.jpg" alt="Payment QR Code" style="max-width:300px;width:100%;height:auto;" />
                        </div>
                    </div>
                    
                    <% if(Currentuser != null) { %>
                        <button type="submit" class="btn btn-accent" style="width:100%;font-size:1.1rem;padding:1rem;">
                            <i class="fas fa-user-plus"></i> Complete Registration
                        </button>
                    <% } else { %>
                        <a href="/loginUser" class="btn btn-primary" style="width:100%;display:block;text-align:center;font-size:1.1rem;padding:1rem;">
                            <i class="fas fa-sign-in-alt"></i> Login to Register
                        </a>
                    <% } %>
                </form>
            </div>

            <!-- Back Button -->
            <div style="text-align:center;margin-top:3rem;">
                <a href="/checkevents" class="btn btn-outline" style="padding:0.8rem 2rem;font-size:1rem;">
                    <i class="fas fa-arrow-left"></i> Back to Events
                </a>
            </div>
        </div>
    </div>

    <footer class="footer-modern">
        <div class="footer-content">
            <div class="footer-section">
                <h3 style="font-family:var(--font-display);font-size:1.8rem;letter-spacing:0.05em;">MATCH HUB</h3>
                <p style="color:#e5e7eb;margin-top:1rem;font-size:0.95rem;">Where champions are made. Every match, every moment.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/checkevents">Events</a></li>
                    <li><a href="/contactUs">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect</h3>
                <div style="display:flex;gap:1rem;margin-top:1rem;">
                    <a href="#" style="color:white;font-size:1.5rem;transition:color 0.3s;" onmouseover="this.style.color='#00E5FF'" onmouseout="this.style.color='white'"><i class="fab fa-instagram"></i></a>
                    <a href="#" style="color:white;font-size:1.5rem;transition:color 0.3s;" onmouseover="this.style.color='#00E5FF'" onmouseout="this.style.color='white'"><i class="fab fa-facebook"></i></a>
                    <a href="#" style="color:white;font-size:1.5rem;transition:color 0.3s;" onmouseover="this.style.color='#00E5FF'" onmouseout="this.style.color='white'"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom"><p>&copy; 2024 Match Hub. All rights reserved. <span style="color:#A6FF00;">Built for Champions.</span></p></div>
    </footer>

    <!-- Success Popup Modal -->
    <div id="successModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;align-items:center;justify-content:center;">
        <div style="background:linear-gradient(135deg,#1E1E1E 0%,#2a2a2a 100%);padding:3rem;border-radius:1.5rem;max-width:450px;text-align:center;border:2px solid #00E5FF;box-shadow:0 0 50px rgba(0,229,255,0.5);animation:modalSlideIn 0.4s ease-out;">
            <div style="width:80px;height:80px;background:linear-gradient(135deg,#A6FF00 0%,#00E5FF 100%);border-radius:50%;margin:0 auto 1.5rem;display:flex;align-items:center;justify-content:center;box-shadow:0 0 30px rgba(166,255,0,0.6);">
                <i class="fas fa-check" style="font-size:3rem;color:#1E1E1E;"></i>
            </div>
            <h2 style="color:#00E5FF;font-size:2rem;margin-bottom:1rem;font-family:var(--font-display);letter-spacing:0.05em;">SUCCESS!</h2>
            <p style="color:#FFFFFF;font-size:1.2rem;margin-bottom:0.5rem;font-weight:600;">Registration Completed!</p>
            <p style="color:#A6FF00;font-size:1rem;margin-bottom:2rem;">Your event registration has been successfully submitted.</p>
            <button onclick="closeModal()" class="btn btn-accent" style="padding:0.8rem 2.5rem;font-size:1.1rem;">
                <i class="fas fa-times-circle"></i> Close
            </button>
        </div>
    </div>

    <style>
        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
    </style>

    <script>
        window.addEventListener('scroll',function(){const n=document.querySelector('.navbar-modern');window.scrollY>50?n.classList.add('scrolled'):n.classList.remove('scrolled');});
        
        // Check if form was submitted successfully
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('success') === 'true') {
            document.getElementById('successModal').style.display = 'flex';
            // Remove success parameter from URL without reloading
            window.history.replaceState({}, document.title, window.location.pathname);
        }
        
        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
        }
        
        // Close modal when clicking outside
        document.getElementById('successModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>